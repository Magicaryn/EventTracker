<!-- Writeups that have not been acknowledged -->
{{#if writeups}}
{{#each writeups}}
<p>{{this.user.username}} has not acknowledged the infraction {{this.type}} for {{this.reason}}</p>
<!-- Button to view an unacknowledged writeup -->
<button type="button" class="btn btn-primary open-modal-button" data-toggle="modal" data-target="#" data-index="{{@index}}">
    View
</button>
<!-- Modals for each unacknowledged writeup -->
<div class="modal fade" id="WriteUp{{@index}}" tabindex="-1" role="dialog" aria-labelledby="writeUpModalLabel" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            <div class="modal-header"> <!-- Modal-->
                <div>
                    <h5 class="modal-title" id="writeUpModalLabel">Write Up</h5>
                    <br>
                    <h6 class="modal-title" id="manager">Manager: {{manager}}</h6>

                    <!-- Can add from the writeupEMP.handlebars --> 
                </div>
            </div>

            <div class="modal-body">
                <form>
                    <div class="form-group"> <!-- .this refers to the writeup -->
                        <label for="warningInfo">Infraction:</label>
                            <p>{{this.type}} for {{this.reason}} 
                                <br>"{{this.content}}"</p>
                    </div>
                    {{#each comments}} <!-- When we use each, we have now changed what .this refers to. It changes from writeup to comment writeups.comment-->
                    <div class="form-group">
                        <label for="commentsTextarea">Commented by - {{this.user.username}}:</label>
                        <p>{{this.content}}</p>
                    </div>
                    {{/each}}
                    <!-- Delete if they have acknowledged -->
                    <div class="form-group">
                        <label for="textInput">Questions/Comments/Concerns</label>
                        <input type="text" class="form-control" id="textInput" writeup="{{this.comments.[0].writeup_id}}"> <!-- Writeups.comments.[0] Call the position in teh array if we ever work with comments-->
                    </div>
                </form>
            </div>
            <div class="modal-footer"> <!-- Houses the button -->
                <!-- Can add the legalese acknowledge text into the footer -->
                <!-- Can probaly add some changes based on whether acknowleged -->
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> <!-- Neded ata-bs-dismiss to close--> 
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="commentsbtn">Add Comments</button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="acknowldgementbtn">Acknowledge</button> <!-- Will probably need an event listenter to submit to a PUT route-->
                
            </div>
        </div>
    </div>
</div>
{{/each}}
{{/if}}



<script>
    document.addEventListener("click", function(event) {
    if (event.target.classList.contains("open-modal-button")) {
        var index = event.target.getAttribute("data-index");
        var modalId = "WriteUp" + index;
        
        $('#' + modalId).modal('show');      
    }
    
});
</script>

